<!DOCTYPE html>
<html lang="eng">
    <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Advanced Javascript Programming Proyect</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.7/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-LN+7fdVzj6u52u30Kp6M/trliBMCMKTyK833zpbD+pXdCLuTusPj697FH4R/5mcr" crossorigin="anonymous">
  </head>
  <body>
    <h2>Assignment 1</h2>
    <div class="container">
        <div class="text-center">Simple Weather App</div>

    <div class="card shadow">
        <div>
            <label for="city">Enter City Name</label>
            <input type="text" id="city" class="form-control mb-3" placeholder="eg. Vancouver">
        </div>
        <button onclick="getWeather()" class="btn btn-primary">Get Weather</button>
    </div>
        <div id="result" class="m-4"></div>

    </div>
    <script>
       async function getWeather() {
            const city = document.getElementById("city").value;
            console.log("City: "+ city);
            const resultDiv = document.getElementById("result");
            
            if(!city){
                console.log("please, enter a city name");
                return;
            }

            const apiKey = "2b28e69c6a5b37603c2485d3bb29536d";
            const url = `http://api.openweathermap.org/geo/1.0/direct?q=${city},{state code},{country code}&appid=${apiKey}&units=metric&lang=en&limit=5`

            
            resultDiv.innerHTML = `<div class="text-center">Loading...</div>`;

            const response = await fetch(url);
            if(!response.ok){
                console.log("error fetching data");
                return;
            }

            const data = await response.json();

            resultDiv.innerHTML = `
            Name: ${data.name} <br>
            Weather: ${data.weathermain} <br>
            Temperature min: ${data.temperaturemin}<br>
            Temperature max: ${data.temperaturemax}<br>


        `
        }
    </script>
   
   <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.7/dist/js/bootstrap.bundle.min.js" 
    integrity="sha384-ndDqU0Gzau9qJ1lfW4pNLlhNTkCfHzAVBReH9diLvGRem5+R9g2FzA8ZGN954O5Q" crossorigin="anonymous">
    </script>
  </body>
</html>

